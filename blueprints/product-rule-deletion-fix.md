# Feature Specification: Product Rule Deletion Persistence Fix

The current implementation of product rule deletion fails to persist in the database because the `ProductRuleDb.delete` and `ProductRuleDb.deleteMany` methods are missing the `await` keyword in the `ProductRuleService` wrapper, and the `ProductRuleDb.delete` method itself may have issues with ID matching if Shopify GIDs are passed directly.

## Affected Domains
- ProductRules

## 1. Database Schema Changes (Prisma)
No changes required to the schema.

## 2. Domain Service Interface (Public API)
Updated implementation in `app/modules/ProductRules/index.ts`:

```typescript
// app/modules/ProductRules/index.ts

export const ProductRuleService = {
  // ...
  deleteRule: async (shop: string, id: string): Promise<void> => {
    // Ensure we await the DB call
    return await ProductRuleDb.delete(shop, id);
  },

  deleteManyRules: async (shop: string, ids: string[]): Promise<void> => {
    // Ensure we await the DB call
    return await ProductRuleDb.deleteMany(shop, ids);
  },
  // ...
}
```

## 3. Interface Layer Requirements (Routes)
Routes should remain the same as they already await `ProductRuleService.deleteRule`.

- `app/routes/app.rules._index.tsx`: Action awaits `ProductRuleService.deleteRule` and `ProductRuleService.deleteManyRules`.
- `app/routes/app.rules.$id.tsx`: Action awaits `ProductRuleService.deleteRule`.

## 4. Constraints & Edge Cases
- **ID Normalization**: Ensure IDs passed to `delete` are the database UUIDs, not Shopify GIDs (though for ProductRules, these should already be UUIDs generated by Prisma).
- **Tenant Isolation**: The `shop` parameter must always be included in the `where` clause to prevent cross-shop deletions.
